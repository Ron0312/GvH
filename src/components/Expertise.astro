---
import { CONTENT } from '../data/content';
import LazyImage from './LazyImage.astro';
import { Icon } from 'lucide-react';
---

<section class="section-padding px-6 animate-in fade-in">
    <div class="max-content">
        <h2 class="clamp-h1 font-serif italic mb-16 md:mb-24 reveal-obs">Disziplinen</h2>

        <div class="grid lg:grid-cols-12 gap-16 items-start">
            <div class="lg:col-span-4 space-y-6">
                {CONTENT.expertise.map((silo, idx) => (
                    <button
                        class={`expertise-tab-btn w-full text-left p-10 md:p-14 transition-all border-l-2 reveal-obs ${idx === 0 ? 'active' : ''}`}
                        data-index={idx}
                        onclick={`
                            document.querySelectorAll('.expertise-tab-btn').forEach(b => {
                                b.classList.remove('bg-white', 'border-[#A0522D]', 'shadow-premium', 'translate-x-4');
                                b.classList.add('border-transparent', 'opacity-30');
                            });
                            this.classList.remove('border-transparent', 'opacity-30');
                            this.classList.add('bg-white', 'border-[#A0522D]', 'shadow-premium', 'translate-x-4');

                            document.querySelectorAll('.expertise-content').forEach(c => c.classList.add('hidden'));
                            document.getElementById('expertise-content-' + this.dataset.index).classList.remove('hidden');
                        `}
                        onmouseenter="window.setCursorMode(true)"
                        onmouseleave="window.setCursorMode(false)"
                    >
                        <span class="text-[9px] uppercase tracking-[0.6em] font-black text-[#A0522D]">{silo.tag}</span>
                        <h4 class="text-2xl md:text-3xl font-serif italic mt-5 leading-tight">{silo.title}</h4>
                    </button>
                ))}
            </div>

            <div class="lg:col-span-8 relative min-h-[600px]">
                 {CONTENT.expertise.map((silo, idx) => (
                    <article id={`expertise-content-${idx}`} class={`expertise-content bg-white p-10 md:p-16 lg:p-24 shadow-premium flex flex-col gap-16 reveal-obs rounded-sm border border-gray-50 absolute inset-0 transition-opacity duration-500 ${idx === 0 ? '' : 'hidden'}`}>
                        <div onmouseenter="window.setCursorMode(true)" onmouseleave="window.setCursorMode(false)">
                            <LazyImage src={silo.img} autoColor={true} aspect="aspect-video" className="rounded-sm group hover:scale-[1.01] transition-transform duration-1000" alt={silo.title} />
                        </div>
                        <div class="space-y-12">
                            <h3 class="text-3xl md:text-5xl font-serif italic leading-tight">{silo.title}</h3>
                            <p class="text-xl md:text-2xl text-gray-400 font-light leading-relaxed italic">{silo.desc}</p>
                            <div class="flex flex-wrap gap-10 pt-12 border-t border-gray-50">
                                {silo.details.map((d, i) => (
                                    <span class="text-[10px] uppercase font-black text-[#A0522D] flex items-center gap-3 animate-in slide-in-from-bottom-2">
                                        <i data-lucide="check" width="14" height="14"></i> {d}
                                    </span>
                                ))}
                            </div>
                        </div>
                    </article>
                 ))}
            </div>
        </div>
    </div>
</section>

<script>
    import { createIcons, Check } from 'lucide';
    createIcons({ icons: { Check } });

    // Initialize first tab styles
    const firstBtn = document.querySelector('.expertise-tab-btn');
    if(firstBtn) {
         firstBtn.classList.add('bg-white', 'border-[#A0522D]', 'shadow-premium', 'translate-x-4');
         firstBtn.classList.remove('border-transparent', 'opacity-30');
    }
</script>
