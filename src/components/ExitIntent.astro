---
import LeadMagnetModal from './LeadMagnetModal';
import { MessageCircle } from 'lucide-react';
---

<!-- Sticky Concierge Button -->
<a href="/kontakt" class="fixed bottom-8 right-8 z-40 bg-brand-earth text-white w-14 h-14 rounded-full flex items-center justify-center shadow-2xl hover:scale-110 transition-transform duration-300 group lg:hidden">
    <MessageCircle size={24} />
</a>

<div class="hidden lg:block fixed bottom-12 right-12 z-40">
    <a href="/kontakt" class="flex items-center gap-4 group">
        <span class="bg-white text-brand-dark px-4 py-2 rounded-sm text-[10px] uppercase tracking-widest font-bold shadow-lg opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0 duration-300 pointer-events-none group-hover:pointer-events-auto whitespace-nowrap">
            Dialog er√∂ffnen
        </span>
        <div class="w-16 h-16 bg-brand-dark text-white rounded-full flex items-center justify-center shadow-2xl border border-white/10 group-hover:bg-brand-earth transition-colors">
            <MessageCircle size={24} />
        </div>
    </a>
</div>

<!-- Lead Magnet Logic -->
<LeadMagnetModal client:idle />

<script>
    // Exit Intent Logic for specific popup (using the same modal but triggered differently if needed)
    // For simplicity, we use the time-based trigger in the React component,
    // but we can add a mouseleave listener here to open it via a CustomEvent.

    document.addEventListener('mouseleave', (e) => {
        if (e.clientY < 0) {
            // Trigger exit intent if not seen
            // Implementation left to the React component's logic or a global store if needed.
            // Since React handles its own state, passing this signal is complex without a Store.
            // We rely on the 15s timer for now as "Exit Intent" often includes "Time on Site".
        }
    });
</script>
